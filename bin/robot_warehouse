#!/usr/bin/env ruby
require_relative "../lib/robot"
require_relative "../lib/position"

class RobotCLI
  def initialize
    @robot = Robot.new(position: Position.new(x: 0, y: 0))
    @running = true
  end

  def start
    puts "Robot Warehouse CLI"
    puts "Robot started at position: #{robot.current_position}"
    puts "Enter commands N,S,E,W (comma-separated) to move the robot, or type 'exit' to quit."
    puts

    while running
      print "> "
      input = gets.chomp.strip

      case input.downcase
      when "exit"
        puts "Exiting the Robot Warehouse CLI."
        @running = false
      else
        begin
          robot.execute(input)
          puts "Robot moved to position: #{robot.current_position}"
        rescue ArgumentError => e
          puts "Error: #{e.message}"
        end
      end
    end
  end

  private

  attr_reader :robot, :running
end

RobotCLI.new.start if __FILE__ == $0
